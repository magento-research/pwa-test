<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright Â© Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
-->

<actionGroups xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/actionGroupSchema.xsd">

    <!--Clicks on Checkout Button in cart-->
    <actionGroup name="ProceedToCheckout">
        <click selector="{{VeniaShoppingCartSection.checkout}}" stepKey="clickOnCheckout01"/>
        <waitForPwaElementNotVisible selector="{{VeniaShoppingCartSection.checkout}}" stepKey="waitForCheckoutButtonToDisappear01"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartDetailsSection.orderDetailsMainArea}}" stepKey="waitForAddShipToInfoButton01"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartDetailsSection.shipToMainArea}}" stepKey="waitForMainArea1"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartDetailsSection.payWithMainArea}}" stepKey="waitForMainArea2"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartDetailsSection.getItByMainArea}}" stepKey="waitForMainArea3"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartDetailsSection.totalMainArea}}" stepKey="waitForMainArea4"/>
    </actionGroup>

    <!--Fills shipping address during checkout -->
    <actionGroup name="AddAndVerifyShipToShippingInformationViaTheShoppingCart">
        <arguments>
            <argument name="customer" defaultValue = "Simple_US_Customer" />
            <argument name="address" defaultValue = "US_Address_TX" />
            <argument name="region" defaultValue = "RegionTX" />
        </arguments>

        <click selector="{{VeniaShoppingCartDetailsSection.addShipToInformation}}" stepKey="clickOnAddShipToLink01"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartShippingAddressSection.firstName}}" stepKey="waitForPlaceOrderButtonToAppear01"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartShippingAddressSection.lastName}}" stepKey="waitForPlaceOrderButtonToAppear02"/>

        <!-- START OF "FillShoppingCartShipToAddress" ACTION GROUP -->
        <fillField userInput="{{customer.firstname}}" selector="{{VeniaShoppingCartShippingAddressSection.firstName}}" stepKey="fillShipToFirstNameField01"/>
        <fillField userInput="{{customer.lastname}}" selector="{{VeniaShoppingCartShippingAddressSection.lastName}}" stepKey="fillShipToLastNameField01"/>
        <fillField userInput="{{address.street[0]}}" selector="{{VeniaShoppingCartShippingAddressSection.streetAddress}}" stepKey="fillShipToStreetAddress01"/>
        <fillField userInput="{{address.city}}" selector="{{VeniaShoppingCartShippingAddressSection.city}}" stepKey="fillShipToCity01"/>
        <fillField userInput="{{address.postcode}}" selector="{{VeniaShoppingCartShippingAddressSection.zipCode}}" stepKey="fillShipToZipCode01"/>
        <fillField userInput="{{region.region_code}}" selector="{{VeniaShoppingCartShippingAddressSection.state}}" stepKey="fillShipToState01"/>
        <fillField userInput="{{customer.phone}}" selector="{{VeniaShoppingCartShippingAddressSection.phoneNumber}}" stepKey="fillShipToPhoneNumber01"/>
        <fillField userInput="{{customer.email}}" selector="{{VeniaShoppingCartShippingAddressSection.email}}" stepKey="fillShipToEmail01"/>
        <!-- END OF "FillShoppingCartShipToAddress" ACTION GROUP -->

        <click selector="{{VeniaShoppingCartShippingAddressSection.save}}" stepKey="clickOnSave01"/>
        <waitForPwaElementNotVisible selector="{{VeniaShoppingCartDetailsSection.addressFormMainArea}}" stepKey="waitForPlaceOrderButtonToDisappear01"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartDetailsSection.orderDetailsMainArea}}" stepKey="waitForAddShipToInfoButton01"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartDetailsSection.shipToMainArea}}" stepKey="waitForMainArea1"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartDetailsSection.payWithMainArea}}" stepKey="waitForMainArea2"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartDetailsSection.getItByMainArea}}" stepKey="waitForMainArea3"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartDetailsSection.totalMainArea}}" stepKey="waitForMainArea4"/>

        <see userInput="{{customer.firstname}} {{customer.lastname}}" selector="{{VeniaShoppingCartDetailsSection.shipToMainArea}}" stepKey="seeFullCustomerName01"/>
        <see userInput="{{address.street[0]}}" selector="{{VeniaShoppingCartDetailsSection.shipToMainArea}}" stepKey="seeFullCustomerAddress01"/>
    </actionGroup>

    <!--Selects shipping method for the order-->
    <actionGroup name="AddGetItByShippingInformationViaTheShoppingCart">
        <arguments>
            <argument name="shippingMethodName" defaultValue="Flat Rate" type="string"/>
        </arguments>
        <click selector="{{VeniaShoppingCartDetailsSection.addShippingInformation}}" stepKey="clickOnAddShippingInformation01"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartGetItBySection.shippingMethod}}" stepKey="waitForShippingInformationTitle01"/>
        <seeOptionIsSelected userInput="{{shippingMethodName}}" selector="{{VeniaShoppingCartGetItBySection.shippingMethod}}" stepKey="selectShippingMethod01"/>
        <click selector="{{VeniaShoppingCartGetItBySection.save}}" stepKey="clickOnShippingMethodSave01"/>
        <waitForPwaElementNotVisible selector="{{VeniaShoppingCartGetItBySection.shippingMethod}}" stepKey="waitForDropDownToDisappear01"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartDetailsSection.getItByMainArea}}" stepKey="waitForPlaceOrderButtonVisible02"/>
    </actionGroup>

    <!--Fills credit card details during checkout-->
    <actionGroup name="EnterCardDetails">
        <arguments>
            <argument name="creditCard" defaultValue="FakeVisaCard"/>
        </arguments>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartCardDetailsSection.textPayWithCard}}" stepKey="waitFOrPaymentSectionToLoad"/>
        <switchToIFrame selector="{{VeniaShoppingCartCardDetailsSection.cartFrame}}" stepKey="switchToIframe4"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartCardDetailsSection.cardNumber}}"  stepKey="waitForCardSectionToLoad"/>
        <fillField userInput="{{creditCard.fakeCardNumber}}" selector="{{VeniaShoppingCartCardDetailsSection.cardNumber}}" stepKey="enterCardNumber"/>
        <switchToIFrame stepKey="switchBack"/>
        <switchToIFrame selector="{{VeniaShoppingCartCardDetailsSection.expirationFrame}}" stepKey="switchToIframe1"/>
        <fillField userInput="{{creditCard.expirationDate}}" selector="{{VeniaShoppingCartCardDetailsSection.expirationDate}}" stepKey="enterCardExpirationDate"/>
        <switchToIFrame stepKey="switchBack1"/>
        <switchToIFrame selector="{{VeniaShoppingCartCardDetailsSection.codeFrame}}" stepKey="switchToIframe2"/>
        <fillField userInput="{{creditCard.cvvCode}}" selector="{{VeniaShoppingCartCardDetailsSection.cvvCode}}" stepKey="enterCardcvvCode"/>
        <switchToIFrame stepKey="switchBack2"/>
    </actionGroup>

    <actionGroup name="SubmitPayment">
        <click selector="{{VeniaShoppingCartPayWithSection.save}}" stepKey="clickOnSave02"/>
        <waitForPwaElementNotVisible selector="{{VeniaShoppingCartPayWithSection.paymentMethod}}" stepKey="waitForPaymentMethodNotVisible01"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartDetailsSection.payWithMainArea}}" stepKey="waitForPayWithAreaVisible01"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartDetailsSection.getItByMainArea}}" stepKey="waitForGetItByAreaVisible01"/>
    </actionGroup>

    <actionGroup name="ConfirmOrder">
        <click selector="{{VeniaShoppingCartDetailsSection.placeOrder}}" stepKey="clickOnPlaceOrder1"/>
        <waitForPwaElementNotVisible selector="{{VeniaShoppingCartDetailsSection.orderDetailsMainArea}}" stepKey="waitForDetailMainArea1"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartThankYouSection.thankYouMainArea}}" stepKey="waitForThankYouMessagePresent"/>
        <seeElement selector="{{VeniaShoppingCartThankYouSection.title}}" stepKey="seeThankYouTitle1"/>
        <seeElement selector="{{VeniaShoppingCartThankYouSection.orderNumber}}" stepKey="seeThankYouOrderNumber1"/>
        <seeElement selector="{{VeniaShoppingCartThankYouSection.continueShopping}}" stepKey="seeThankYouContinueShoppingButton1"/>
        <seeElement selector="{{VeniaShoppingCartThankYouSection.createAnAccount}}" stepKey="seeThankYouCreateAccountButton1"/>
    </actionGroup>

    <actionGroup name="RemoveItemFromTheCart">
        <arguments>
            <argument name="product" defaultValue="ApiConfigurableProduct"/>
        </arguments>
        <click selector="{{VeniaShoppingCartKebabSection.kebabMenu(product.name)}}" stepKey="clickOnKebabMenu"/>
        <wait time="3" stepKey="temporaryStaticWait"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartKebabSection.removeItem}}" stepKey="waitForKebabMenuToExpand"/>
        <click selector="{{VeniaShoppingCartKebabSection.removeItem}}" stepKey="clickOnRemoveItem"/>
        <wait time="8" stepKey="temporaryStaticWait1"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartThankYouSection.continueShopping}}" stepKey="waitForContinueShoppingButtonToAppear"/>
        <seeElement selector="{{VeniaShoppingCartThankYouSection.continueShopping}}" stepKey="seeThankYouContinueShoppingButton1"/>
        <see userInput="There are no items in your shopping cart" stepKey="seeEmptyCartText"/>
        <dontSee selector="{{VeniaShoppingCartKebabSection.kebabMenu(product.name)}}" stepKey="dontSeeProductInCart" />
    </actionGroup>

    <actionGroup name="GoToEditItemCartPanel">
        <arguments>
            <argument name="product" defaultValue="ApiConfigurableProduct"/>
        </arguments>
        <click selector="{{VeniaShoppingCartKebabSection.kebabMenu(product.name)}}" stepKey="clickOnKebabMenu"/>
        <wait time="3" stepKey="temporaryStaticWait"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartKebabSection.editItem}}" stepKey="waitForKebabMenuToExpand"/>
        <click selector="{{VeniaShoppingCartKebabSection.editItem}}" stepKey="clickOnEditItem"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartEditSection.updateCart}}" stepKey="waitForEditPanelToDisplay"/>
    </actionGroup>

    <!--Selects a option from multi select and quantity for a single option configurable product-->
    <actionGroup name="UpdateProductConfigOptions">
        <arguments>
            <argument name="product" defaultValue="ConfigData"/>
        </arguments>
        <wait time="5" stepKey="temporaryStaticWait"/>
        <waitForPwaElementVisible selector="{{VeniaShoppingCartEditSection.productOptionByValue(product.label1)}}" stepKey="waitFOrProducttoDisplay"/>
        <click selector="{{VeniaShoppingCartEditSection.productOptionByValue(product.label1)}}" stepKey="clickOnSizeOption01"/>
        <selectOption selector="{{VeniaShoppingCartEditSection.quantity}}" userInput="{{product.qty1}}" stepKey="selectProductQuantity01"/>
        <click selector="{{VeniaShoppingCartEditSection.updateCart}}" stepKey="clickOnUpdateCartButton"/>
    </actionGroup>

</actionGroups>
