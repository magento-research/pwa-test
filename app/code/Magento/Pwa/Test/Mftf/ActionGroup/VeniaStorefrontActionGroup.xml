<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright Â© Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
-->

<actionGroups xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/actionGroupSchema.xsd">
    <actionGroup name="TemporaryWait3">
        <wait time="3" stepKey="waitForElementToLoad"/>
    </actionGroup>

    <actionGroup name="TemporaryWait5">
        <wait time="3" stepKey="waitForElementToLoad"/>
    </actionGroup>

    <actionGroup name="GoToVeniaMobileStorefront">
        <resizeWindow width="375" height="812" stepKey="resizeWindowForMobile1"/>

        <amOnPage url="{{Venia.url}}" stepKey="goToVeniaStorefront1"/>
        <waitForPwaElementVisible selector="{{VeniaStorefrontSection.productImage('Shop The Look')}}" stepKey="waitForPwaCategoryVisible01"/>
    </actionGroup>

    <actionGroup name="GoToVeniaDesktopStorefront">
        <amOnPage url="{{Venia.url}}" stepKey="goToVeniaStorefront1"/>
        <waitForPwaElementVisible selector="{{VeniaStorefrontSection.title}}" stepKey="waitForPwaCategoryVisible01"/>
    </actionGroup>

    <actionGroup name="SearchProduct">

        <arguments>
            <argument name="searchData" type="string"/>
        </arguments>

        <wait time="3" stepKey="waitForElementToLoad1"/>
        <waitForPwaElementVisible selector="{{VeniaHeaderSection.searchInput}}" stepKey="waitForSearchFieldToLoad"/>
        <pressKey selector="{{VeniaHeaderSection.searchInput}}" parameterArray="['{{searchData}}',\Facebook\WebDriver\WebDriverKeys::ENTER]" stepKey="inputSearchStringAndPressEnter"/>
    </actionGroup>


    <actionGroup name="AssertSearchedResults">

        <arguments>
            <argument name="productDetails" type="string"/>
        </arguments>

        <waitForPwaElementVisible selector="{{VeniaSearchResultSection.productImage(productDetails)}}" stepKey="waitForSearchItemToLoad1"/>
        <wait time="5" stepKey="waitForElementToLoad"/>
        <seeElement selector="{{VeniaSearchResultSection.productImage(productDetails)}}" stepKey="seeSearchedResults"/>
        <see userInput="{{productDetails}}" stepKey="seeSearchedResult"/>
    </actionGroup>

    <actionGroup name="AssertNoSearchResults">
        <waitForPwaElementVisible selector="{{VeniaSearchResultSection.resultSection}}" stepKey="waitForSearchItemToLoad1"/>
        <wait time="3" stepKey="waitForElementToLoad1"/>
        <see userInput="No results found!" stepKey="seeNoResultsAreDisplayed"/>
    </actionGroup>


    <actionGroup name="InputSearchString">

        <arguments>
            <argument name="searchData" type="string"/>
        </arguments>

        <wait time="3" stepKey="waitForElementToLoad1"/>
        <waitForPwaElementVisible selector="{{VeniaHeaderSection.searchInput}}" stepKey="waitForSearchFieldToLoad"/>
        <fillField userInput="{{searchData}}" selector="{{VeniaHeaderSection.searchInput}}" stepKey="inputSearchString"/>
    </actionGroup>

    <actionGroup name="AssertResultsInSuggestionBox">

        <arguments>
            <argument name="productDetails" type="string"/>
        </arguments>

        <waitForPwaElementVisible selector="{{VeniaSearchSuggestionResultsSection.suggestionBox}}" stepKey="waitForSuggestionBoxToLoad"/>
        <waitForPwaElementVisible selector="{{VeniaSearchSuggestionResultsSection.suggestedCategories}}" stepKey="waitForSuggestionBoxCategoriesToLoad"/>
        <waitForPwaElementVisible selector="{{VeniaSearchSuggestionResultsSection.suggestedProducts}}" stepKey="waitForSuggestionBoxProductsToLoad"/>
        <see userInput="PRODUCT SUGGESTIONS" stepKey="seeSearchedResultHeader"/>
        <see userInput="{{productDetails}}" stepKey="seeSearchedResult"/>
    </actionGroup>

    <actionGroup name="AssertNoResultsInSuggestionBox">
        <wait time="3" stepKey="waitForElementToLoad1"/>
        <waitForPwaElementVisible selector="{{VeniaSearchSuggestionResultsSection.suggestionBox}}" stepKey="waitForSuggestionBoxToLoad"/>
        <waitForPwaElementVisible selector="{{VeniaSearchSuggestionResultsSection.noResults}}" stepKey="waitForSuggestionBoxResultsToLoad"/>
        <dontSeeElement selector="{{VeniaSearchSuggestionResultsSection.suggestedCategories}}" stepKey="categoriesSuggestionShouldNotBeDisplayed"/>
        <dontSeeElement selector="{{VeniaSearchSuggestionResultsSection.suggestedProducts}}" stepKey="productSuggestionShouldNotBeDisplayed"/>
        <dontSee userInput="PRODUCT SUGGESTIONS" stepKey="seeSearchedResultHeader"/>
        <see userInput="No results found, try a different search" stepKey="seeSearchedResult"/>
    </actionGroup>

</actionGroups>
